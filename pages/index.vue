<template>
  <div>
    <section class="relative z-10 min-h-screen">
      <div class="grid">
        <div class="grid-item" style="--r: 1; --c: 1">
          <img src="~/assets/images/1.webp" alt="Image 1" />
        </div>
        <div class="grid-item" style="--r: 1; --c: 5">
          <img src="~/assets/images/2.webp" alt="Image 2" />
        </div>
        <div class="grid-item" style="--r: 1; --c: 6">
          <img src="~/assets/images/3.webp" alt="Image 3" />
        </div>
        <div class="grid-item" style="--r: 2; --c: 7">
          <img src="~/assets/images/4.webp" alt="Image 4" />
        </div>
        <div class="grid-item" style="--r: 2; --c: 1">
          <img src="~/assets/images/5.webp" alt="Image 5" />
        </div>
        <div class="grid-item" style="--r: 2; --c: 5">
          <img src="~/assets/images/6.webp" alt="Image 6" />
        </div>
        <div class="grid-item" style="--r: 3; --c: 6">
          <img src="~/assets/images/7.webp" alt="Image 7" />
        </div>
        <div class="grid-item" style="--r: 3; --c: 7">
          <img src="~/assets/images/8.webp" alt="Image 8" />
        </div>
        <div class="grid-item" style="--r: 3; --c: 1">
          <img src="~/assets/images/9.webp" alt="Image 9" />
        </div>
        <div class="grid-item" style="--r: 4; --c: 5">
          <img src="~/assets/images/10.webp" alt="Image 10" />
        </div>
        <div class="grid-item" style="--r: 4; --c: 6">
          <img src="~/assets/images/11.webp" alt="Image 11" />
        </div>
        <div class="grid-item" style="--r: 4; --c: 7">
          <img src="~/assets/images/12.webp" alt="Image 12" />
        </div>
        <div class="grid-item" style="--r: 5; --c: 1">
          <img src="~/assets/images/13.webp" alt="Image 13" />
        </div>
        <div class="grid-item" style="--r: 5; --c: 7">
          <img src="~/assets/images/14.webp" alt="Image 14" />
        </div>
        <div class="grid-item" style="--r: 5; --c: 6">
          <img src="~/assets/images/15.webp" alt="Image 15" />
        </div>
        <div class="grid-item" style="--r: 6; --c: 5">
          <img src="~/assets/images/16.webp" alt="Image 16" />
        </div>
        <div class="grid-item" style="--r: 6; --c: 1">
          <img src="~/assets/images/17.webp" alt="Image 17" />
        </div>
        <div class="grid-item" style="--r: 6; --c: 7">
          <img src="~/assets/images/18.webp" alt="Image 18" />
        </div>
        <div class="grid-item" style="--r: 7; --c: 6">
          <img src="~/assets/images/19.webp" alt="Image 19" />
        </div>
        <div class="grid-item" style="--r: 7; --c: 5">
          <img src="~/assets/images/20.webp" alt="Image 20" />
        </div>
        <div class="grid-item" style="--r: 7; --c: 1">
          <img src="~/assets/images/21.webp" alt="Image 21" />
        </div>
        <div class="grid-item" style="--r: 8; --c: 7">
          <img src="~/assets/images/22.webp" alt="Image 22" />
        </div>
        <div class="grid-item" style="--r: 8; --c: 6">
          <img src="~/assets/images/23.webp" alt="Image 23" />
        </div>
        <div class="grid-item" style="--r: 8; --c: 5">
          <img src="~/assets/images/24.webp" alt="Image 24" />
        </div>
        <div class="grid-item" style="--r: 9; --c: 1">
          <img src="~/assets/images/25.webp" alt="Image 25" />
        </div>
        <div class="grid-item" style="--r: 9; --c: 7">
          <img src="~/assets/images/26.webp" alt="Image 26" />
        </div>
        <div class="grid-item" style="--r: 9; --c: 6">
          <img src="~/assets/images/27.webp" alt="Image 27" />
        </div>
        <div class="grid-item" style="--r: 10; --c: 5">
          <img src="~/assets/images/28.webp" alt="Image 28" />
        </div>
        <div class="grid-item" style="--r: 10; --c: 1">
          <img src="~/assets/images/29.webp" alt="Image 29" />
        </div>
        <div class="grid-item" style="--r: 10; --c: 7">
          <img src="~/assets/images/30.webp" alt="Image 30" />
        </div>
        <div class="grid-item" style="--r: 11; --c: 6">
          <img src="~/assets/images/31.webp" alt="Image 31" />
        </div>
        <div class="grid-item" style="--r: 11; --c: 5">
          <img src="~/assets/images/32.webp" alt="Image 32" />
        </div>
        <div class="grid-item" style="--r: 11; --c: 1">
          <img src="~/assets/images/33.webp" alt="Image 33" />
        </div>
        <div class="grid-item" style="--r: 12; --c: 7">
          <img src="~/assets/images/34.webp" alt="Image 34" />
        </div>
        <div class="grid-item" style="--r: 12; --c: 6">
          <img src="~/assets/images/35.webp" alt="Image 35" />
        </div>
        <div class="grid-item" style="--r: 12; --c: 5">
          <img src="~/assets/images/36.webp" alt="Image 36" />
        </div>
        <div class="grid-item" style="--r: 13; --c: 1">
          <img src="~/assets/images/37.webp" alt="Image 37" />
        </div>
        <div class="grid-item" style="--r: 13; --c: 7">
          <img src="~/assets/images/38.webp" alt="Image 38" />
        </div>
        <div class="grid-item" style="--r: 13; --c: 6">
          <img src="~/assets/images/39.webp" alt="Image 39" />
        </div>
        <div class="grid-item" style="--r: 14; --c: 5">
          <img src="~/assets/images/40.webp" alt="Image 40" />
        </div>
        <div class="grid-item" style="--r: 14; --c: 1">
          <img src="~/assets/images/41.webp" alt="Image 41" />
        </div>
        <div class="grid-item" style="--r: 14; --c: 7">
          <img src="~/assets/images/42.webp" alt="Image 42" />
        </div>
        <div class="grid-item" style="--r: 15; --c: 6">
          <img src="~/assets/images/43.webp" alt="Image 43" />
        </div>
        <div class="grid-item" style="--r: 15; --c: 5">
          <img src="~/assets/images/44.webp" alt="Image 44" />
        </div>
        <div class="grid-item" style="--r: 15; --c: 1">
          <img src="~/assets/images/45.webp" alt="Image 45" />
        </div>
        <div class="grid-item" style="--r: 16; --c: 7">
          <img src="~/assets/images/46.webp" alt="Image 46" />
        </div>
        <div class="grid-item" style="--r: 16; --c: 6">
          <img src="~/assets/images/47.webp" alt="Image 47" />
        </div>
        <div class="grid-item" style="--r: 16; --c: 5">
          <img src="~/assets/images/48.webp" alt="Image 48" />
        </div>
        <div class="grid-item" style="--r: 17; --c: 1">
          <img src="~/assets/images/49.webp" alt="Image 49" />
        </div>
        <div class="grid-item" style="--r: 17; --c: 7">
          <img src="~/assets/images/50.webp" alt="Image 50" />
        </div>
        <div class="grid-item" style="--r: 17; --c: 6">
          <img src="~/assets/images/51.webp" alt="Image 51" />
        </div>
        <div class="grid-item" style="--r: 18; --c: 5">
          <img src="~/assets/images/52.webp" alt="Image 52" />
        </div>
        <div class="grid-item" style="--r: 18; --c: 1">
          <img src="~/assets/images/53.webp" alt="Image 53" />
        </div>
        <div class="grid-item" style="--r: 18; --c: 7">
          <img src="~/assets/images/54.webp" alt="Image 54" />
        </div>
      </div>

      <div
        class="fixed left-0 top-0 flex h-screen w-full items-center justify-center"
      >
        <UContainer>
          <h1 class="text-9xl font-bold">
            LIVELY JAPAN<sup class="font-thin">❐</sup>
          </h1>
          <p
            class="mt-4 font-noto-sans-japanese text-2xl tracking-wide text-gray-400"
          >
            活気あふれる日本の<span class="font-semibold">心</span>
          </p>
        </UContainer>
      </div>
    </section>

    <div class="relative z-20">
      <section class="reverse-color-mode">
        <div class="flex h-screen w-full items-center justify-center">
          <UContainer>
            <div
              class="cursor-default text-justify text-6xl uppercase"
              :data-video="1"
            >
              is a country that is rich in culture and tradition. It is known
              for its beautiful landscapes delicious food and friendly people.
            </div>
          </UContainer>
        </div>
      </section>

      <section class="relative">
        <UContainer> </UContainer>
      </section>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ScrollTrigger } from 'gsap/all'

const { $gsap } = useNuxtApp()

function animateImages(): void {
  const gridItems = document.querySelectorAll('.grid-item')
  const images = document.querySelectorAll('.grid-item img')

  $gsap.to(images, {
    opacity: 1,
    duration: 1,
    stagger: {
      amount: 1.2,
      from: 'random',
    },
  })

  gridItems.forEach((item) => {
    const xTransform = $gsap.utils.random(-100, 100)

    const tl = $gsap.timeline({
      defaults: {
        ease: 'none',
      },
    })

    tl.set(item, {
      transformOrigin: `${xTransform < 0 ? 'left' : 'right'}`,
    }).to(item, {
      scale: 0,
      scrollTrigger: {
        trigger: item,
        start: 'top top',
        end: 'bottom top',
        scrub: 1,
      },
    })
  })
}

onMounted(() => {
  nextTick(() => {
    animateImages()
  })
})

onUnmounted(() => {
  ScrollTrigger.getAll().forEach((trigger) => trigger.kill())
})
</script>

<style class="postcss">
.grid {
  position: relative;
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 1rem;
  width: 100%;

  .grid-item {
    grid-column: var(--c);
    grid-row: var(--r);
    position: relative;
    will-change: transform;

    img {
      width: 100%;
      height: auto;
      object-fit: cover;
      filter: contrast(70%);
      aspect-ratio: auto;
      opacity: 0;
    }
  }
}
</style>
